(library
  (name web)
  (public_name query-json)
  (preprocess (pps js_of_ocaml-ppx))
)

(rule
  (targets query-json.js)
  (action
    (run %{bin:js_of_ocaml} compile
         -o %{targets}
         --pretty
         Index.re
     )
  )
)

(alias
  (name default)
  (deps query-json.js index.html))